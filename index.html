<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy National GF Day</title>
<style>
  /* Your full CSS from before + passcode-input style */

  * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
  }

  body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(135deg, #ffebee 0%, #fce4ec 50%, #f8bbd0 100%);
      color: #d81b60;
      overflow-x: hidden;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
  }

  #particles-js {
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 0;
  }

  .container {
      max-width: 800px;
      width: 90%;
      background-color: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(216, 27, 96, 0.3);
      padding: 30px;
      position: relative;
      z-index: 1;
      overflow: hidden;
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.3);
  }

  h1, h2 {
      font-family: 'Dancing Script', cursive;
      text-align: center;
      margin-bottom: 20px;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  }

  h1 {
      font-size: 3.5rem;
      color: #d81b60;
      background: linear-gradient(to right, #d81b60, #ff4081);
      background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 30px;
  }

  h2 {
      font-size: 2.5rem;
      color: #f06292;
      margin-bottom: 25px;
  }

  p {
      font-size: 1.2rem;
      line-height: 1.8;
      margin-bottom: 25px;
      text-align: center;
      color: #555;
  }

  .step {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 500px;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.8s, transform 0.8s;
      padding: 20px;
  }

  .step.active {
      display: flex;
      opacity: 1;
      transform: translateY(0);
  }

  .btn {
      background: linear-gradient(45deg, #d81b60, #ff4081);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 50px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 25px;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(216, 27, 96, 0.4);
      font-weight: 600;
      letter-spacing: 1px;
      position: relative;
      overflow: hidden;
      z-index: 1;
  }

  .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(216, 27, 96, 0.5);
  }

  .btn:active {
      transform: translateY(1px);
  }

  .btn:before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, #ff4081, #d81b60);
      z-index: -1;
      opacity: 0;
      transition: opacity 0.3s;
  }

  .btn:hover:before {
      opacity: 1;
  }

  .heart {
      width: 120px;
      height: 120px;
      background-color: #ff4081;
      transform: rotate(45deg);
      margin: 40px auto;
      position: relative;
      animation: heartbeat 1.5s infinite;
      cursor: pointer;
      box-shadow: 0 0 40px rgba(255, 64, 129, 0.6);
      transition: all 0.3s;
  }

  .heart:hover {
      transform: rotate(45deg) scale(1.1);
      box-shadow: 0 0 60px rgba(255, 64, 129, 0.8);
  }

  .heart:before, .heart:after {
      content: '';
      width: 120px;
      height: 120px;
      background-color: #ff4081;
      border-radius: 50%;
      position: absolute;
      box-shadow: 0 0 40px rgba(255, 64, 129, 0.6);
  }

  .heart:before {
      top: -60px;
      left: 0;
  }

  .heart:after {
      top: 0;
      left: -60px;
  }

  @keyframes heartbeat {
      0% { transform: rotate(45deg) scale(1); }
      25% { transform: rotate(45deg) scale(1.1); }
      30% { transform: rotate(45deg) scale(1); }
      35% { transform: rotate(45deg) scale(1.2); }
      50% { transform: rotate(45deg) scale(1); }
      100% { transform: rotate(45deg) scale(1); }
  }

  .name-input, .passcode-input {
      padding: 15px 25px;
      border: 2px solid #f8bbd0;
      border-radius: 50px;
      font-size: 1.1rem;
      width: 80%;
      max-width: 350px;
      margin: 25px 0;
      outline: none;
      transition: all 0.3s;
      background-color: rgba(255, 255, 255, 0.8);
      text-align: center;
      font-family: 'Montserrat', sans-serif;
  }

  .name-input:focus, .passcode-input:focus {
      border-color: #d81b60;
      box-shadow: 0 0 15px rgba(216, 27, 96, 0.3);
      transform: scale(1.02);
  }

  .message-box {
      background-color: #fce4ec;
      border-radius: 20px;
      padding: 25px;
      margin: 25px 0;
      text-align: center;
      box-shadow: 0 8px 20px rgba(216, 27, 96, 0.15);
      transform: scale(0.9);
      opacity: 0;
      transition: all 0.8s;
      border: 1px solid rgba(255, 255, 255, 0.5);
      max-width: 90%;
      margin-left: auto;
      margin-right: auto;
  }

  .message-box.show {
      transform: scale(1);
      opacity: 1;
  }

  .typing-effect {
      border-right: 2px solid #d81b60;
      animation: blink 0.75s step-end infinite;
      overflow: hidden;

      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      min-height: 2rem;
  }

  @keyframes blink {
      from, to { border-color: transparent }
      50% { border-color: #d81b60 }
  }

  .progress-bar {
      width: 100%;
      height: 10px;
      background-color: #f8bbd0;
      border-radius: 5px;
      margin: 25px 0 0 0;
      overflow: hidden;
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  .progress {
      height: 100%;
      background: linear-gradient(to right, #f06292, #d81b60);
      width: 0%;
      transition: width 0.8s cubic-bezier(0.65, 0, 0.35, 1);
      border-radius: 5px;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
      h1 {
          font-size: 2.5rem;
      }
      h2 {
          font-size: 2rem;
      }
      .container {
          padding: 20px;
      }
  }

  @media (max-width: 480px) {
      h1 {
          font-size: 2rem;
      }
      h2 {
          font-size: 1.5rem;
      }
      p {
          font-size: 1rem;
      }
      .btn {
          padding: 12px 25px;
          font-size: 1rem;
      }
  }
</style>
</head>
<body>
  <div class="container">

    <!-- Step 1: Intro envelope -->
    <div id="step1" class="step active">
      <h1>Welcome, My Love</h1>
      <div id="envelope" class="envelope" style="font-size: 80px; text-align: center; cursor:pointer;">üì©</div>
      <button class="btn" onclick="nextStep()">Open</button>
    </div>

    <!-- Step 2: Name input -->
    <div id="step2" class="step">
      <h2>Enter Your Name</h2>
      <input type="text" id="nameInput" class="name-input" placeholder="Your beautiful name" />
      <button class="btn" onclick="saveName()">Next</button>
    </div>

    <!-- Step 3: Passcode input -->
    <div id="step3" class="step">
      <h2>Enter the Passcode</h2>
      <input type="password" id="passcodeInput" class="passcode-input" placeholder="Passcode" />
      <button class="btn" onclick="checkPasscode()">Next</button>
    </div>

    <!-- Step 4: Heart message -->
    <div id="step4" class="step">
      <h2>For <span id="heartName">My Love</span></h2>
      <div id="interactiveHeart" class="heart" title="Click me!"></div>
      <div id="heartMessage" class="message-box">
        <div id="typingText" class="typing-effect"></div>
      </div>
      <button class="btn" onclick="nextStep()">Next</button>
    </div>
    <!-- Step 5: Final fireworks & message -->
    <div id="step5" class="step">
      <h1>Happy National GF Day, <span id="finalName">My Love</span>! ‚ù§Ô∏è</h1>
      <div class="heart"></div>
      <div id="fireworksContainer"></div>
    </div>

    <!-- Progress bar -->
    <div class="progress-bar">
      <div id="progressBar" class="progress"></div>
    </div>

    <!-- Containers for petals and floating hearts -->
    <div id="petalsContainer" class="petals"></div>
    <div id="floatingHearts"></div>
    <button class="btn" onclick="window.location.href='songs.html'">Next</button>
  </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/particles.js"></script>
<script>
  // Your full JS here, adjusted for passcode step and all

  let currentStep = 1;
  const totalSteps = 5;
  let userName = "My Love";
  const passcode = "7225";

  // Initialize particles.js
  particlesJS("particles-js", {
      "particles": {
          "number": {
              "value": 40,
              "density": {
                  "enable": true,
                  "value_area": 800
              }
          },
          "color": {
              "value": "#f06292"
          },
          "shape": {
              "type": "circle",
              "stroke": {
                  "width": 0,
                  "color": "#000000"
              }
          },
          "opacity": {
              "value": 0.6,
              "random": true,
              "anim": {
                  "enable": true,
                  "speed": 1,
                  "opacity_min": 0.1,
                  "sync": false
              }
          },
          "size": {
              "value": 6,
              "random": true,
              "anim": {
                  "enable": true,
                  "speed": 2,
                  "size_min": 0.1,
                  "sync": false
              }
          },
          "line_linked": {
              "enable": true,
              "distance": 150,
              "color": "#f8bbd0",
              "opacity": 0.4,
              "width": 1.5
          },
          "move": {
              "enable": true,
              "speed": 1.5,
              "direction": "none",
              "random": true,
              "straight": false,
              "out_mode": "out",
              "bounce": false,
              "attract": {
                  "enable": true,
                  "rotateX": 600,
                  "rotateY": 1200
              }
          }
      },
      "interactivity": {
          "detect_on": "canvas",
          "events": {
              "onhover": {
                  "enable": true,
                  "mode": "grab"
              },
              "onclick": {
                  "enable": true,
                  "mode": "push"
              },
              "resize": true
          },
          "modes": {
              "grab": {
                  "distance": 160,
                  "line_linked": {
                      "opacity": 1
                  }
              },
              "push": {
                  "particles_nb": 6
              }
          }
      },
      "retina_detect": true
  });

  document.addEventListener('DOMContentLoaded', function() {
      showStep(currentStep);
      createPetals();

      const heartMessage = document.getElementById('heartMessage');
      document.getElementById('interactiveHeart').addEventListener('click', function() {
          createHearts();
          setTimeout(() => {
              heartMessage.classList.add('show');
          }, 500);
      });
  });

  function showStep(step) {
      document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
      const currentStepEl = document.getElementById(`step${step}`);
      if (currentStepEl) currentStepEl.classList.add('active');

      const progressPercentage = ((step - 1) / (totalSteps - 1)) * 100;
      gsap.to("#progressBar", {
          width: `${progressPercentage}%`,
          duration: 1,
          ease: "power2.out"
      });

      switch(step) {
          case 1:
              gsap.from("#envelope", {
                  y: 100,
                  opacity: 0,
                  duration: 1,
                  ease: "back.out(1.7)"
              });
              break;
          case 2:
              gsap.from(".name-input", {
                  scale: 0.5,
                  opacity: 0,
                  duration: 0.8,
                  ease: "elastic.out(1, 0.5)"
              });
              break;
          case 3:
              gsap.from(".passcode-input", {
                  scale: 0.5,
                  opacity: 0,
                  duration: 0.8,
                  ease: "elastic.out(1, 0.5)"
              });
              break;
          case 4:
              gsap.from("#interactiveHeart", {
                  scale: 0.5,
                  rotation: 180,
                  duration: 1,
                  ease: "elastic.out(1, 0.5)"
              });
              document.getElementById('heartName').textContent = userName;
              typeMessage();
              break;
          case 5:
              createFireworks();
              gsap.from(".heart", {
                  scale: 0,
                  duration: 1.5,
                  ease: "elastic.out(1, 0.5)"
              });
              break;
      }
  }

  function nextStep() {
      if (currentStep < totalSteps) {
          currentStep++;
          showStep(currentStep);
          if (currentStep === 2) {
              document.getElementById('envelope').classList.add('open');
          }
      }
  }

  function saveName() {
      const nameInput = document.getElementById('nameInput').value.trim();
      if (nameInput) {
          userName = nameInput;
          document.getElementById('heartName').textContent = userName;
          document.getElementById('finalName').textContent = userName;
          nextStep();

          gsap.to(".name-input", {
              backgroundColor: "#e8f5e9",
              borderColor: "#81c784",
              duration: 0.5,
              yoyo: true,
              repeat: 1
          });
      } else {
          gsap.to(".name-input", {
              backgroundColor: "#ffebee",
              borderColor: "#e53935",
              duration: 0.5,
              yoyo: true,
              repeat: 1
          });
          alert("Please enter your beautiful name to continue");
      }
  }

  function checkPasscode() {
      const inputCode = document.getElementById('passcodeInput').value.trim();
      if (inputCode === passcode) {
          nextStep();
          gsap.to(".passcode-input", {
              backgroundColor: "#e8f5e9",
              borderColor: "#81c784",
              duration: 0.5,
              yoyo: true,
              repeat: 1
          });
      } else {
          gsap.to(".passcode-input", {
              backgroundColor: "#ffebee",
              borderColor: "#e53935",
              duration: 0.5,
              yoyo: true,
              repeat: 1
          });
          alert("Wrong passcode, please try again");
      }
  }

  function createHearts() {
      const container = document.getElementById('floatingHearts');
      const colors = ['#ff4081', '#f06292', '#f8bbd0', '#d81b60', '#ff80ab'];

      for (let i = 0; i < 25; i++) {
          const heart = document.createElement('div');
          heart.classList.add('floating-heart');
          heart.innerHTML = '‚ù§';
          heart.style.position = 'fixed';
          heart.style.left = `${Math.random() * 100}%`;
          heart.style.color = colors[Math.floor(Math.random() * colors.length)];
          heart.style.animationDuration = `${3 + Math.random() * 3}s`;
          heart.style.fontSize = `${20 + Math.random() * 25}px`;
          heart.style.top = `${60 + Math.random() * 30}%`;
          heart.style.zIndex = 9999;

          container.appendChild(heart);

          setTimeout(() => {
              heart.remove();
          }, 4000);
      }

      gsap.to("#interactiveHeart", {
          scale: 1.3,
          duration: 0.3,
          yoyo: true,
          repeat: 1
      });
  }

  function createPetals() {
      // (You can keep your petals code or remove it if you want)
  }
  
  function typeMessage() {
      const messages = [
          `Dear ${userName},`,
          "On this special day, I want you to know...",
          "You are the most amazing person I've ever met.",
          "Your smile brightens my darkest days.",
          "Your laugh is my favorite sound in the world.",
          "Your love gives me strength and happiness.",
          "I'm so grateful to have you in my life.",
          "May this year bring you all the joy you deserve.",
          "You deserve the world and more.",
          "Happy National GF Day, my love! ‚ù§"
      ];

      const typingText = document.getElementById('typingText');
      let messageIndex = 0;
      let charIndex = 0;
      let isDeleting = false;
      let typingSpeed = 100;

      function type() {
          const currentMessage = messages[messageIndex];

          if (isDeleting) {
              typingText.innerHTML = currentMessage.substring(0, charIndex - 1);
              charIndex--;
              typingSpeed = 50;
          } else {
              typingText.innerHTML = currentMessage.substring(0, charIndex + 1);
              charIndex++;
              typingSpeed = 100;
          }

          if (!isDeleting && charIndex === currentMessage.length) {
              isDeleting = true;
              typingSpeed = 1500;
          } else if (isDeleting && charIndex === 0) {
              isDeleting = false;
              messageIndex = (messageIndex + 1) % messages.length;
              typingSpeed = 500;
          }

          setTimeout(type, typingSpeed);
      }

      setTimeout(() => {
          typingText.classList.add('show');
          type();
      }, 500);
  }

  function createFireworks() {
      const colors = ['#ff4081', '#f06292', '#f8bbd0', '#d81b60', '#ff80ab', '#ffcdd2'];

      for (let i = 0; i < 8; i++) {
          setTimeout(() => {
              createFirework(colors);
          }, i * 800);
      }

      setInterval(() => {
          if (Math.random() > 0.7) {
              createFirework(colors);
          }
      }, 2000);
  }

  function createFirework(colors) {
      const firework = document.createElement('div');
      firework.classList.add('firework');
      firework.style.position = 'fixed';
      firework.style.width = '10px';
      firework.style.height = '10px';
      firework.style.borderRadius = '50%';
      firework.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
      firework.style.left = `${Math.random() * window.innerWidth}px`;
      firework.style.top = `${Math.random() * window.innerHeight * 0.8}px`;
      firework.style.zIndex = 9999;

      document.body.appendChild(firework);

      setTimeout(() => {
          for (let i = 0; i < 30; i++) {
              const particle = document.createElement('div');
              particle.classList.add('firework-particle');
              particle.style.position = 'fixed';
              particle.style.width = '6px';
              particle.style.height = '6px';
              particle.style.borderRadius = '50%';
              particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
              particle.style.left = firework.style.left;
              particle.style.top = firework.style.top;
              particle.style.zIndex = 9999;

              const angle = (i / 30) * 2 * Math.PI;
              const distance = 100;

              gsap.to(particle, {
                  x: Math.cos(angle) * distance,
                  y: Math.sin(angle) * distance,
                  opacity: 0,
                  duration: 1,
                  ease: "power1.out",
                  onComplete: () => particle.remove()
              });

              document.body.appendChild(particle);
          }

          firework.remove();
      }, 300);
  }
</script>
</body>
</html>
